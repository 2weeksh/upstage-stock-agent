<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StockWars</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://fonts.cdnfonts.com/css/star-wars" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body, html, .page-main {
            overflow: hidden !important;
            height: 100vh !important;
        }
        .loading-wrapper {
            position: relative;
            z-index: 10;
        }
        .loading-left.box {
            background: #ffffff !important;
            backdrop-filter: none !important;
        }
        .chat-container {
            background: #f1f5f9 !important;
        }
    </style>
</head>
<body>

    <a href="start.html" class="t-main" style="position: fixed; top: 25px; left: 25px; z-index: 1000; font-size: 1.5rem; font-family: 'Star Wars', sans-serif; text-decoration: none; letter-spacing: -0.02em;">SToCKwars</a>

    <main class="page-main">
        <div class="chart-bg" id="chartBg"></div>

        <div class="loading-wrapper">

            <div class="loading-left box">
                <span class="label">사용자 질문</span>
                <p id="displayQuestion" class="user-question-text">
                    질문을 불러오는 중...
                </p>
            </div>

            <div class="loading-right">

                <div id="loading-content" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
                    <div class="loading-status-header">
                        <div class="spinner"></div>
                        <h2 class="status-title">다중 에이전트 분석 진행 중</h2>
                    </div>

                    <div id="chatContainer" class="chat-container"></div>

                    <button id="stopBtn" class="btn btn-stop" style="margin-top: 1.5rem;">
                        분석 중지
                    </button>
                </div>

                <div id="success-content" class="hidden flex-col items-center">
                    <div class="loading-status-header mb-4">
                        <div class="success-icon-wrapper">
                            <svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                      d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                        <h2 class="status-title text-green-400">분석이 완료되었습니다</h2>
                    </div>

                    <p class="status-desc text-gray-300 mb-8">
                        AI 에이전트들의 토론 결과를 확인하세요.
                    </p>

                    <a href="analysis.html" class="btn btn-result" onclick="localStorage.removeItem('history_mode');">
                        결과 리포트 확인하기
                    </a>
                </div>
            </div>
        </div>
    </main>

    <script src="../js/script.js"></script>
    <script src="js/auth.js"></script>
</body>
</html>